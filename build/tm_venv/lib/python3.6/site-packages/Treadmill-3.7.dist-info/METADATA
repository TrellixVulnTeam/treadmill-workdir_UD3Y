Metadata-Version: 2.1
Name: Treadmill
Version: 3.7
Summary: UNKNOWN
Home-page: 'http://treadmill/',
Author: UNKNOWN
Author-email: UNKNOWN
License: Apache 2.0
Platform: UNKNOWN
Classifier: Operating System :: Unix
Classifier: Operating System :: POSIX
Classifier: Operating System :: Microsoft :: Windows
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.4
Classifier: Programming Language :: Python :: Implementation :: CPython
Requires-Dist: APScheduler (<3.4,>=3.3)
Requires-Dist: blinker (<2,>=1.3)
Requires-Dist: click (<7,>=6.6)
Requires-Dist: decorator (<4.3,>=4.0)
Requires-Dist: dnspython (<2,>=1.15)
Requires-Dist: docker (>=3.3)
Requires-Dist: flask-limiter (<2,>=1.0.1)
Requires-Dist: Flask-RESTful (<1,>=0.3)
Requires-Dist: flask-restplus (<1,>=0.10)
Requires-Dist: Flask (<1,>=0.12)
Requires-Dist: gevent (>=1.1)
Requires-Dist: Jinja2 (<3,>=2.9)
Requires-Dist: jsonschema (<3,>=2.5)
Requires-Dist: Limits (<2,>=1.3)
Requires-Dist: ldap3 (<3,>=2.3)
Requires-Dist: netifaces (!=0.10.8,<0.11,>=0.10)
Requires-Dist: Numpy (<1.16,>=1.13)
Requires-Dist: pandas (<0.21,>=0.19)
Requires-Dist: parse (<2,>=1.8)
Requires-Dist: prettytable (<1,>=0.7)
Requires-Dist: psutil (<5,>=4.2)
Requires-Dist: pytz (>=2017)
Requires-Dist: PyYAML (<4,>=3)
Requires-Dist: requests-kerberos (<1,>=0.11)
Requires-Dist: requests (<3,>=2.18)
Requires-Dist: simplejson (<4,>=3.8)
Requires-Dist: six (<2,>=1.10)
Requires-Dist: tabulate (<1,>=0.7)
Requires-Dist: tornado (<5,>=4.4)
Requires-Dist: Twisted (<18,>=16.4)
Requires-Dist: websocket-client (<1,>=0.40.0)
Requires-Dist: urllib3 (<1.23)
Requires-Dist: kazoo (<=2.5.0,>=2.2)
Requires-Dist: ipaddress (>=1.0) ; python_version <= "3.3"
Requires-Dist: gssapi (>=1.2) ; sys_platform == "linux"
Requires-Dist: pykerberos (<2,>=1.1) ; sys_platform == "linux"
Requires-Dist: requests-unixsocket (<1,>=0.1) ; sys_platform == "linux"
Requires-Dist: pypiwin32 (>=219) ; sys_platform == "win32"
Requires-Dist: winkerberos (>=0.6) ; sys_platform == "win32"

# Treadmill

[![Build Status](https://travis-ci.org/Morgan-Stanley/treadmill.svg?branch=master)](https://travis-ci.org/Morgan-Stanley/treadmill)
## Download
```shell
wget https://github.com/Morgan-Stanley/treadmill/releases/download/0.0.1/treadmill -O /usr/bin/treadmill && chmod +x /usr/bin/treadmill
```
This will put `treadmill` in your path.

## Vagrant setup for development

### Prerequisites
* [VirtualBox](https://www.virtualbox.org/wiki/Downloads)
* [Vagrant](https://www.vagrantup.com/docs/installation/)
* Install the [Guest Additions plugin](https://github.com/dotless-de/vagrant-vbguest) for Vagrant
``` sh
vagrant plugin install vagrant-vbguest
```
### Vagrant Setup
* Clone the [treadmill](https://github.com/Morgan-Stanley/treadmill.git) repo.
* Clone the [treadmill-pid1](https://github.com/Morgan-Stanley/treadmill-pid1) repo.
* Run the following commands
``` sh
cd treadmill
git checkout standard_setup
vagrant up
vagrant ssh
```
* Create the cgroup folders as root
``` sh
sudo su -
cd /sys/fs/cgroup
for i in *; do mkdir -p $i/treadmill/apps $i/treadmill/core $i/system ; done
cd -
```
* Start the zookeeper service
``` sh
cd /home/centos && zookeeper-3.4.9/bin/zkServer.sh start
```
* Make the mount private
``` sh
sudo mount --make-rprivate /
```
* Treadmill should now be available on the box
``` sh
source /home/centos/env/bin/activate
treadmill --help
```


### Treadmill cli cheatsheet
``` sh
treadmill sproc scheduler /tmp
treadmill sproc service --root-dir /tmp/treadmill/ localdisk --reserve 20G --img-location /tmp/treadmill --default-read-bps 100M --default-write-bps 100M --default-read-iops 300 --default-write-iops 300
treadmill sproc service --root-dir /tmp/treadmill/ network
treadmill sproc service --root-dir /tmp/treadmill/ cgroup

# Zookeeper shell
create /scheduled/centos.bar#123 {"memory":"100M","cpu":"10%","disk":"500M","proid":"centos","affinity":"centos.bar","services":[{"name":"sleep","command":"/bin/top","restart":{"limit":5,"interval":60}}]}
create /servers/localhost.localdomain {"parent":"all:unknown","features":[],"traits":[],"label":null,"valid_until":1488573090.0}
create /cell/all:unknown {}
create /buckets/all:unknown {"parent":null,"traits":0}

# System shell
treadmill sproc init --approot /tmp/treadmill/
cd /tmp/treadmill/running && nohup /bin/s6-svscan > s6_svscan.out & && cd -
treadmill sproc eventdaemon
treadmill sproc appcfgmgr
```


